{"version":3,"sources":["uni-app:///main.js","webpack:///D:/公司项目/eyeUnidev/eyeUnidev/pages/vipIntegral/vipIntegral.vue?ac74","webpack:///D:/公司项目/eyeUnidev/eyeUnidev/pages/vipIntegral/vipIntegral.vue?85ab","webpack:///D:/公司项目/eyeUnidev/eyeUnidev/pages/vipIntegral/vipIntegral.vue?fe67","webpack:///D:/公司项目/eyeUnidev/eyeUnidev/pages/vipIntegral/vipIntegral.vue?c872","uni-app:///pages/vipIntegral/vipIntegral.vue","webpack:///D:/公司项目/eyeUnidev/eyeUnidev/pages/vipIntegral/vipIntegral.vue?6a7f","webpack:///D:/公司项目/eyeUnidev/eyeUnidev/pages/vipIntegral/vipIntegral.vue?7ad5"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,+G;AACAA,UAAU,CAACC,oBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoI;AACpI;AAC+D;AACL;AACqC;;;AAG/F;AACgN;AAChN,gBAAgB,wNAAU;AAC1B,EAAE,iFAAM;AACR,EAAE,kGAAM;AACR,EAAE,2GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,sGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,gNAEN;AACL,GAAG;AACH;AACA,WAAW,8OAEN;AACL,GAAG;AACH;AACA,WAAW,wLAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACrDA;AAAA;AAAA;AAAA;AAA4zB,CAAgB,40BAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACiGh1B,qF;;;;AAIA;AACA,MADA,kBACA;AACA;AACA;AACA,iBADA;AAEA,eAFA;AAGA,wBAHA;AAIA,qBAJA,EADA;;AAOA,cAPA;;AASA,oBATA,EASA;AACA,oBAVA,EAUA;AACA;AACA,6BAZA;AAaA,gBAbA;AAcA,iBAdA,EAcA;AACA,sBAfA,EAeA;AACA,kBAhBA,EAgBA;AACA,sBAjBA,CAiBA;AAjBA;AAmBA,GArBA;AAsBA,QAtBA,oBAsBA;AACA;AACA;AACA,GAzBA;AA0BA,eA1BA,2BA0BA;AACA;AACA;AACA;AACA;AACA;AACA,GAhCA;AAiCA,QAjCA,oBAiCA;AACA;AACA;AACA,KAFA,EAEA,IAFA;AAGA,GArCA;AAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qHADA;AAEA,SAHA,MAGA;AACA;AACA,wBADA;AAEA,wCAFA;AAGA,0BAHA;;AAKA;AACA,OAZA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA,OATA,CAdA;AAwBA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA,wBADA;AAEA,wCAFA;AAGA,0BAHA;;AAKA;AACA,OAVA,CAzBA;AAoCA,KAvCA;AAwCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OANA;AAOA,KAjDA;AAkDA;AACA,sCAnDA;AAoDA;AACA,eArDA,uBAqDA,CArDA,EAqDA;AACA;AACA;AACA;AACA,KAzDA;AA0DA;;;;;AAKA;;;;;AAKA,KApEA;AAqEA;AACA;AACA;AACA;AACA,0BADA;AAEA;AACA;AACA;AACA,qDADA;AAEA,gBAFA,CAEA;AACA;AACA;AACA;AACA,kBADA,CACA,0BADA,EACA;AACA,wCADA,EADA;;AAIA,kBAJA,CAIA;AACA;AACA;AACA,qCADA;AAEA,iDAFA;AAGA,+CAHA;AAIA,kDAJA;AAKA,+CALA;AAMA,6CANA;AAOA,2BAPA,mBAOA,IAPA,EAOA;AACA;AACA;AACA,qCADA;;AAGA;AACA;AACA,uBAFA,EAEA,IAFA;AAGA;AACA,qBAhBA;AAiBA,wBAjBA,gBAiBA,GAjBA,EAiBA;AACA;AACA,qCADA;;AAGA;AACA;AACA,uBAFA,EAEA,IAFA;AAGA;AACA,qBAzBA;;AA2BA;AACA,eAlCA;AAmCA,aAxCA;AAyCA,WA1CA,MA0CA;AACA,SA9CA;;AAgDA,KAxHA;AAyHA;AACA;AACA;AACA;AACA,oBADA;;AAGA;AACA,UADA,CACA;AACA;AACA;AACA;AACA;AACA,cADA,CACA;AACA;AACA;AACA;AACA,qCADA;AAEA,2CAFA;AAGA,8CAHA;AAIA,6CAJA;AAKA,2CALA;AAMA,6CANA;AAOA,mCAPA;;AASA;AACA,iCADA;AAEA,oCAFA;AAGA;AACA,oCADA,CACA;AACA;AACA,iCADA;AAEA,kCAFA;;AAIA;AACA;AACA,mBAFA,EAEA,IAFA;AAGA;AACA,iBAbA;AAcA;AACA;AACA,gCADA;AAEA,iCAFA;AAGA,kCAHA;;AAKA;AACA;AACA,mBAFA,EAEA,IAFA;AAGA;AACA,iBAxBA;;AA0BA,aApCA,MAoCA;AACA;AACA,4BADA;AAEA,4CAFA;AAGA,8BAHA;;AAKA;AACA,WA9CA;AA+CA,SAhDA,MAgDA;AACA;AACA,wBADA;AAEA,wCAFA;AAGA,0BAHA;;AAKA;AACA,OA3DA;AA4DA,KA3LA;AA4LA;AACA;AACA;AACA,oBADA;;AAGA;AACA;AACA;AACA;AACA,cADA,CACA;AACA;AACA;AACA;AACA;AACA,eAFA,MAEA;AACA;AACA;AACA,aANA,MAMA;AACA;AACA,4BADA;AAEA,4CAFA;AAGA,8BAHA;;AAKA;AACA,WAhBA;AAiBA,SAlBA,MAkBA;AACA;AACA,wBADA;AAEA,wCAFA;AAGA,0BAHA;;AAKA;AACA,OA3BA;AA4BA,KA7NA,EAtCA;;AAqQA;AACA,oBADA;AAEA,4BAFA;AAGA,oCAHA,EArQA,E;;;;;;;;;;;;;ACrGA;AAAA;AAAA;AAAA;AAA4rC,CAAgB,+qCAAG,EAAC,C;;;;;;;;;;;ACAhtC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/vipIntegral/vipIntegral.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/vipIntegral/vipIntegral.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./vipIntegral.vue?vue&type=template&id=152e10da&scoped=true&\"\nvar renderjs\nimport script from \"./vipIntegral.vue?vue&type=script&lang=js&\"\nexport * from \"./vipIntegral.vue?vue&type=script&lang=js&\"\nimport style0 from \"./vipIntegral.vue?vue&type=style&index=0&id=152e10da&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\QMDownload\\\\HBuilderX.2.7.5.20200519.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"152e10da\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/vipIntegral/vipIntegral.vue\"\nexport default component.exports","export * from \"-!E:\\\\QMDownload\\\\HBuilderX.2.7.5.20200519.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\QMDownload\\\\HBuilderX.2.7.5.20200519.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\QMDownload\\\\HBuilderX.2.7.5.20200519.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\QMDownload\\\\HBuilderX.2.7.5.20200519.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\QMDownload\\\\HBuilderX.2.7.5.20200519.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\QMDownload\\\\HBuilderX.2.7.5.20200519.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./vipIntegral.vue?vue&type=template&id=152e10da&scoped=true&\"","var components = {\n  uniCollapse: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-collapse/uni-collapse\" */ \"@/components/uni-collapse/uni-collapse.vue\"\n    )\n  },\n  uniCollapseItem: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-collapse-item/uni-collapse-item\" */ \"@/components/uni-collapse-item/uni-collapse-item.vue\"\n    )\n  },\n  zzxTabs: function() {\n    return import(\n      /* webpackChunkName: \"components/zzx-tabs/zzx-tabs\" */ \"@/components/zzx-tabs/zzx-tabs.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.vipCommodity, function(item, index) {\n    var $orig = _vm.__get_orig(item)\n\n    var m0 = encodeURIComponent(JSON.stringify(item.id))\n    return {\n      $orig: $orig,\n      m0: m0\n    }\n  })\n\n  var l1 = _vm.__map(_vm.Integral, function(item, index) {\n    var $orig = _vm.__get_orig(item)\n\n    var m1 = encodeURIComponent(JSON.stringify(item.id))\n    return {\n      $orig: $orig,\n      m1: m1\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        l1: l1\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\QMDownload\\\\HBuilderX.2.7.5.20200519.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\QMDownload\\\\HBuilderX.2.7.5.20200519.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\QMDownload\\\\HBuilderX.2.7.5.20200519.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\QMDownload\\\\HBuilderX.2.7.5.20200519.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\QMDownload\\\\HBuilderX.2.7.5.20200519.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./vipIntegral.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\QMDownload\\\\HBuilderX.2.7.5.20200519.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\QMDownload\\\\HBuilderX.2.7.5.20200519.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\QMDownload\\\\HBuilderX.2.7.5.20200519.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\QMDownload\\\\HBuilderX.2.7.5.20200519.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\QMDownload\\\\HBuilderX.2.7.5.20200519.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./vipIntegral.vue?vue&type=script&lang=js&\"","<template>\r\n<view class=\"vip-room\">\r\n    <view class=\"content\">\r\n        <!-- 头部积分与购买记录 -->\r\n        <view class=\"vip-title\">\r\n            <view>\r\n                <text>现有积分{{ integration }}</text>\r\n            </view>\r\n            <view>\r\n                <navigator url=\"/pages/vipIntegral/Record\">\r\n                    <text>会员购买记录</text>\r\n                </navigator>\r\n            </view>\r\n        </view>\r\n        <!-- 手风琴效果 -->\r\n        <uni-collapse accordion=\"false\" showAnimation=\"true\">\r\n            <uni-collapse-item :title=\"vipTime\">\r\n                <!-- 会员套餐 -->\r\n                <view class=\"vip\">\r\n                    <view v-for=\"(item, index) in vipList\" :key=\"index\">\r\n                        <view class=\"vip-box\">\r\n                            <view>\r\n                                <text>{{ item.name }}</text>\r\n                                <text>价格:￥{{ item.price }}</text>\r\n                            </view>\r\n\r\n                            <view>\r\n                                <text>有效期:{{ item.months }}月</text>\r\n                                <button @click=\"payvip(index)\" size=\"mini\">购买</button>\r\n                            </view>\r\n                        </view>\r\n                    </view>\r\n                </view>\r\n            </uni-collapse-item>\r\n        </uni-collapse>\r\n    </view>\r\n\r\n    <!-- Tabs 标签页 -->\r\n    <view style=\"margin-top: 20upx\">\r\n        <zzx-tabs :items=\"items\" :current=\"current\" @clickItem=\"onClickItem\" ref=\"mytabs\"></zzx-tabs>\r\n    </view>\r\n    <view style=\"\r\n        margin-top: 20upx;\r\n        color: #999999;\r\n        font-size: 24upx;\r\n        height: 260upx;\r\n      \">\r\n        <!-- 会员商品 -->\r\n        <view v-show=\"current === 0\">\r\n            <view class=\"commodity\">\r\n                <view class=\"parent-box\" v-for=\"(item, index) in vipCommodity\" :key=\"index\">\r\n                    <navigator :url=\"\r\n                '/pages/vipIntegral/commodity-list?itemid=' +\r\n                encodeURIComponent(JSON.stringify(item.id))\r\n              \">\r\n                        <view class=\"commodity-list\">\r\n                            <!-- 跳转页面传递会员商品id -->\r\n                            <view class=\"img\" :style=\"{ backgroundImage: 'url(' + item.picUrl + ')' }\">\r\n                                <!-- <image id=\"image\" mode=\"widthFix\" :src=\"item.picUrl\"></image> -->\r\n                            </view>\r\n                            <view class=\"pri\">\r\n                                <view>{{ item.name }}</view>\r\n                                <view><text style=\"text-decoration: line-through\">原价￥{{ item.counterPrice }}</text></view>\r\n                                <view style=\"color: #ff1497\">会员价￥{{ item.memberPrice }}</view>\r\n                            </view>\r\n                        </view>\r\n                    </navigator>\r\n                </view>\r\n            </view>\r\n        </view>\r\n        <!-- 积分商品 -->\r\n        <view v-show=\"current === 1\">\r\n            <view class=\"commodity\">\r\n                <view class=\"parent-box\" v-for=\"(item, index) in Integral\" :key=\"index\">\r\n                    <navigator :url=\"\r\n                '/pages/vipIntegral/integral-list?itemid=' +\r\n                encodeURIComponent(JSON.stringify(item.id))\r\n              \">\r\n                        <view class=\"commodity-list\">\r\n                            <view class=\"img\" :style=\"{ backgroundImage: 'url(' + item.picUrl + ')' }\">\r\n                                <!-- <image :src=\"item.picUrl\"></image> -->\r\n                            </view>\r\n                            <view class=\"pri\">\r\n                                <view>{{ item.goodsName }}</view>\r\n\r\n                                <view style=\"color: #ff1497\">积分{{ item.integration }}</view>\r\n                            </view>\r\n                        </view>\r\n                    </navigator>\r\n                </view>\r\n            </view>\r\n        </view>\r\n    </view>\r\n</view>\r\n</template>\r\n\r\n<script>\r\nimport api from '@/pages/api/api.js'\r\nimport zzxTabs from \"@/components/zzx-tabs/zzx-tabs.vue\";\r\nimport uniCollapse from \"@/components/uni-collapse/uni-collapse.vue\";\r\nimport uniCollapseItem from \"@/components/uni-collapse-item/uni-collapse-item.vue\";\r\nexport default {\r\n    data() {\r\n        return {\r\n            data: {\r\n                limit: 10,\r\n                page: 1,\r\n                sort: \"add_time\",\r\n                order: \"desc\",\r\n            },\r\n            pages: 0,\r\n\r\n            vipTime: \"会员卡\", //会员到期时间\r\n            integration: 0, //会员初始积分\r\n            // Tabs 标签页\r\n            items: [\"会员商品\", \"积分商品\"],\r\n            current: 0,\r\n            vipList: [], // 会员套餐数组\r\n            vipCommodity: [], // 会员商品数组\r\n            Integral: [], // 积分商品数组\r\n            providerList: [], // 微信支付标识符\r\n        };\r\n    },\r\n    onLoad() {\r\n        this.init();\r\n        this.vipTimeFun();\r\n    },\r\n    onReachBottom() {\r\n        this.data.page++;\r\n        if (this.data.page > this.pages) {\r\n            return;\r\n        }\r\n        this.init();\r\n    },\r\n    onShow() {\r\n        setTimeout(function () {\r\n            uni.hideLoading();\r\n        }, 1500);\r\n    },\r\n    methods: {\r\n        init: function () {\r\n            //会员商品请求\r\n            this.$request.get(api.vipCommodityList, this.data).then((res) => {\r\n                    // console.log(res)\r\n                    if (res.errno == 0) {\r\n                        (this.pages = res.data.pages),\r\n                        this.vipCommodity.push(...res.data.list);\r\n                    } else {\r\n                        uni.showToast({\r\n                            icon: \"none\",\r\n                            title: `${res.errmsg}`,\r\n                            duration: 1000,\r\n                        });\r\n                    }\r\n                }),\r\n                //会员套餐请求\"member/package/list\"\r\n                this.$request.get(api.membershipCard).then((res) => {\r\n                    // console.log(res)\r\n                    this.vipList = res.data.list;\r\n                    //查询赋值积分\r\n                    if (res.data.integral) {\r\n                        this.integration = res.data.integral.integration;\r\n                    } else {\r\n                        this.integration = 0;\r\n                    }\r\n                }),\r\n                //积分商品请求\r\n                this.$request.get(api.integralCommodityList, this.data).then((res) => {\r\n                    if (res.errno == 0) {\r\n                        (this.pages = res.data.pages), this.Integral.push(...res.data.list);\r\n                    } else {\r\n                        uni.showToast({\r\n                            icon: \"none\",\r\n                            title: `${res.errmsg}`,\r\n                            duration: 1000,\r\n                        });\r\n                    }\r\n                });\r\n        },\r\n        // 会员卡到期时间\r\n        vipTimeFun: function () {\r\n            this.$request.get(api.membershipTime).then((res) => {\r\n                console.log(res);\r\n                if (res.data.page == 1) {\r\n                    let Time = \"会员到期时间:\" + res.data.list[0].endTime;\r\n                    this.vipTime = Time.substring(0, 17);\r\n                }\r\n            });\r\n        },\r\n        //点击会员商品\r\n        commodity: function () {},\r\n        //Tabs点击函数\r\n        onClickItem(e) {\r\n            if (this.current !== e.currentIndex) {\r\n                this.current = e.currentIndex;\r\n            }\r\n        },\r\n        payvip: function (index) {\r\n            // #ifdef APP-PLUS\r\n            this.appPayment(index);\r\n            // #endif\r\n            // #ifdef MP-WEIXIN\r\n            this.wxPayment(index);\r\n            // #endif\r\n\t\t\t// #ifdef H5\r\n\t\t\tthis.H5Payment(index);\r\n\t\t\t// #endif\r\n        },\r\n        //小程序会员卡购买\r\n        wxPayment: function (index) {\r\n            let that = this;\r\n            uni.showModal({\r\n                content: \"确定购买会员么\",\r\n                success: function (res) {\r\n                    if (res.confirm) {\r\n                        that.$request.post(api.submitMembership, {\r\n                            memberPackageId: that.vipList[index].id,})\r\n                        .then((res) => {\r\n                                console.log(res);\r\n                                const temporary = res;\r\n                                that.$request\r\n                                    .post(api.vipPrepayment, {\r\n                                        memberOrderId: temporary,\r\n                                    })\r\n                                    .then((res) => {\r\n                                        if (res.errno == 0) {\r\n                                            uni.requestPayment({\r\n                                                provider: \"wxpay\",\r\n                                                timeStamp: res.data.timeStamp,\r\n                                                nonceStr: res.data.nonceStr,\r\n                                                package: res.data.packageValue,\r\n                                                signType: res.data.signType,\r\n                                                paySign: res.data.paySign,\r\n                                                success(ress) {\r\n                                                    that.vipTimeFun();\r\n                                                    uni.showLoading({\r\n                                                        title: \"购买成功\",\r\n                                                    });\r\n                                                    setTimeout(function () {\r\n                                                        uni.hideLoading();\r\n                                                    }, 2000);\r\n                                                    // console.log('success:' + JSON.stringify(ress));\r\n                                                },\r\n                                                fail(err) {\r\n                                                    uni.showLoading({\r\n                                                        title: \"购买失败\",\r\n                                                    });\r\n                                                    setTimeout(function () {\r\n                                                        uni.hideLoading();\r\n                                                    }, 2000);\r\n                                                    // console.log('fail:' + JSON.stringify(err));\r\n                                                },\r\n                                            });\r\n                                        }\r\n                                    });\r\n                            });\r\n                    } else if (res.cancel) {}\r\n                },\r\n            });\r\n        },\r\n        // app 点击购买\r\n        appPayment: function (index) {\r\n            let that = this;\r\n            uni.showLoading({\r\n                title: \"请稍后\",\r\n            });\r\n            that.$request.post(api.submitMembership,{memberPackageId: that.vipList[index].id,})\r\n                .then((res) => {\r\n                    console.log(res)\r\n                    const temporary = res;\r\n                    if (temporary) {\r\n                        that.$request.post(api.vipPrepayment,{memberOrderId: temporary})\r\n                        .then((res) => {\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\tif (res.errno == 0) {\r\n\t\t\t\t\t\t\t\t\tlet orderInfo = {\r\n\t\t\t\t\t\t\t\t\t\tappid: res.data.appId,\r\n\t\t\t\t\t\t\t\t\t\tnoncestr: res.data.nonceStr,\r\n\t\t\t\t\t\t\t\t\t\tpackage: res.data.packageValue,\r\n\t\t\t\t\t\t\t\t\t\tpartnerid: res.data.partnerId,\r\n\t\t\t\t\t\t\t\t\t\tprepayid: res.data.prepayId,\r\n\t\t\t\t\t\t\t\t\t\ttimestamp: res.data.timeStamp,\r\n\t\t\t\t\t\t\t\t\t\tsign: res.data.sign,\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\tuni.requestPayment({\r\n\t\t\t\t\t\t\t\t\t\tprovider: \"wxpay\",\r\n\t\t\t\t\t\t\t\t\t\torderInfo: orderInfo,\r\n\t\t\t\t\t\t\t\t\t\tsuccess: function (res) {\r\n\t\t\t\t\t\t\t\t\t\t\tthat.vipTimeFun(); // 请求会员卡时间\r\n\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: \"付款成功\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t\t\t\t}, 2000);\r\n\t\t\t\t\t\t\t\t\t\t\t// console.log('success:' + JSON.stringify(res));\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\tfail: function (res) {\r\n\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: \"付款失败\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t\t\t\t}, 2000);\r\n\t\t\t\t\t\t\t\t\t\t\t// console.log('success:' + JSON.stringify(res));\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t});\r\n                                } else {\r\n                                    uni.showToast({\r\n                                        icon: \"none\",\r\n                                        title: `${res.errmsg}`,\r\n                                        duration: 1000,\r\n                                    });\r\n                                }\r\n                            });\r\n                    } else {\r\n                        uni.showToast({\r\n                            icon: \"none\",\r\n                            title: `${res.errmsg}`,\r\n                            duration: 1000,\r\n                        });\r\n                    }\r\n                });\r\n        },\r\n\t\tH5Payment: function (index) {\r\n\t\t    let that = this;\r\n\t\t    uni.showLoading({\r\n\t\t        title: \"请稍后\",\r\n\t\t    });\r\n\t\t    that.$request.post(api.submitMembership, { memberPackageId: that.vipList[index].id,}).then((res) => {\r\n\t\t            const temporary = res;\r\n\t\t            if (temporary) {\r\n\t\t                that.$request.post(api.H5prepayment, {memberOrderId: temporary})\r\n\t\t                .then((res) => {\r\n\t\t                        console.log(res)\r\n\t\t                        if (res.errno == 0) {\r\n\t\t                            if(res.data.result.mwebUrl.includes('https://')||res.data.result.mwebUrl.includes('http://')){\r\n\t\t                            \tlocation.href = res.data.result.mwebUrl\r\n\t\t                            }else{\r\n\t\t                            \tlocation.href = `https://${res.data.result.mwebUrl}`\r\n\t\t                            }\r\n\t\t                        } else {\r\n\t\t                            uni.showToast({\r\n\t\t                                icon: \"none\",\r\n\t\t                                title: `${res.errmsg}`,\r\n\t\t                                duration: 1000,\r\n\t\t                            });\r\n\t\t                        }\r\n\t\t                    });\r\n\t\t            } else {\r\n\t\t                uni.showToast({\r\n\t\t                    icon: \"none\",\r\n\t\t                    title: `${res.errmsg}`,\r\n\t\t                    duration: 1000,\r\n\t\t                });\r\n\t\t            }\r\n\t\t        });\r\n\t\t}\r\n    },\r\n    components: {\r\n        zzxTabs,\r\n        uniCollapse,\r\n        uniCollapseItem,\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* 适应微信小程序的通配符 */\r\n:not(not) {\r\n    box-sizing: border-box;\r\n}\r\n\r\n* {\r\n    box-sizing: border-box;\r\n}\r\n\r\n.content {\r\n    padding: 0 20rpx;\r\n}\r\n\r\n/* 头部积分与购买记录 */\r\n.vip-title {\r\n    height: 80rpx;\r\n    border: 1rpx solid #ff1497;\r\n    display: flex;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n}\r\n\r\n.vip-title>view {\r\n    height: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    flex-basis: 100%;\r\n}\r\n\r\n.vip-title>view:nth-child(even) {\r\n    background-color: #ff1497;\r\n    color: #ffffff;\r\n}\r\n\r\n/* 会员套餐 */\r\n.vip-box {\r\n    height: 150rpx;\r\n    border-radius: 10rpx;\r\n    margin: 20rpx 0;\r\n    background-image: url(../../static/img/vip-back.jpg);\r\n    /* background-size: cover; */\r\n    background-size: 100% 100%;\r\n    display: flex;\r\n}\r\n\r\n.vip-box>view {\r\n    display: flex;\r\n    justify-content: space-around;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    flex-basis: 100%;\r\n    font-size: 30rpx;\r\n}\r\n\r\n.vip {\r\n    background-color: #ffffff;\r\n}\r\n\r\n/* 会员商品 */\r\n.commodity {\r\n    padding: 2%;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    align-content: space-between;\r\n    background-color: #e7eaed;\r\n}\r\n\r\n.parent-box {\r\n    width: 50%;\r\n    padding: 20rpx;\r\n}\r\n\r\n.commodity-list {\r\n    height: 400rpx;\r\n    background-color: #ffffff;\r\n    display: flex;\r\n    flex-direction: column;\r\n    text-align: center;\r\n}\r\n\r\n.img {\r\n    height: 75%;\r\n    background-size: 100% 100%;\r\n    border-radius: 10rpx;\r\n}\r\n\r\n.pri {\r\n    height: 30%;\r\n    color: #000000;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-around;\r\n}\r\n\r\n.pri view {\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n}\r\n</style>\r\n","import mod from \"-!E:\\\\QMDownload\\\\HBuilderX.2.7.5.20200519.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\QMDownload\\\\HBuilderX.2.7.5.20200519.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\QMDownload\\\\HBuilderX.2.7.5.20200519.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\QMDownload\\\\HBuilderX.2.7.5.20200519.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\QMDownload\\\\HBuilderX.2.7.5.20200519.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\QMDownload\\\\HBuilderX.2.7.5.20200519.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\QMDownload\\\\HBuilderX.2.7.5.20200519.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./vipIntegral.vue?vue&type=style&index=0&id=152e10da&scoped=true&lang=css&\"; export default mod; export * from \"-!E:\\\\QMDownload\\\\HBuilderX.2.7.5.20200519.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\QMDownload\\\\HBuilderX.2.7.5.20200519.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\QMDownload\\\\HBuilderX.2.7.5.20200519.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\QMDownload\\\\HBuilderX.2.7.5.20200519.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\QMDownload\\\\HBuilderX.2.7.5.20200519.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\QMDownload\\\\HBuilderX.2.7.5.20200519.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\QMDownload\\\\HBuilderX.2.7.5.20200519.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./vipIntegral.vue?vue&type=style&index=0&id=152e10da&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1606443945497\n      var cssReload = require(\"E:/QMDownload/HBuilderX.2.7.5.20200519.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}