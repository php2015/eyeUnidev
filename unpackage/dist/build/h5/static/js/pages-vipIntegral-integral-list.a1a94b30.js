(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-vipIntegral-integral-list"],{"39c7":function(t,o,i){var e=i("24fb");o=e(!1),o.push([t.i,".integral[data-v-fc609552]{background-color:#f2f2f2}.content[data-v-fc609552]{margin-bottom:50px}\r\n\r\n/* 轮播图 */.swiper[data-v-fc609552]{\r\n    /* height: 700rpx; */}.swiper-item uni-image[data-v-fc609552]{height:375px;width:100%}\r\n\r\n/* 商品介绍 */.con_goods_name[data-v-fc609552]{font-size:14px;padding:10px 15px;background-color:#fff}.con_goods_price[data-v-fc609552]{height:30px;line-height:30px;padding:0 15px;background-color:#fff}.new_price[data-v-fc609552]{font-size:20px;color:#ff1497;margin-right:10px}.old_price[data-v-fc609552]{font-size:12px;color:#999;text-decoration:line-through}\r\n\r\n/* 商品规格 */.middle_size[data-v-fc609552]{margin-top:20px;height:40px;line-height:40px;background:#fff;font-size:14px;padding:0 20px;text-align:right}.middle_size>span[data-v-fc609552]{float:left}\r\n\r\n/* 商品详情 */.details[data-v-fc609552]{background-color:#fff;margin-top:20px;text-align:center;font-size:14px;padding:10px}\r\n\r\n/* 商品常见问题 */.normal_prob[data-v-fc609552]{margin-top:10px;text-align:center;font-size:14px;padding:10px;position:relative}.normal_prob_span[data-v-fc609552]{z-index:10;position:relative;width:80px;display:inline-block;background:#f2f2f2}.line[data-v-fc609552]{width:calc(100% - 20px);border:1px solid #e5e5e5;position:absolute;top:19px;z-index:0}.problem_content[data-v-fc609552]{background-color:#fff;padding:10px 0}.pro_li[data-v-fc609552]{font-size:14px;margin-bottom:10px}.problem_text[data-v-fc609552]{margin-top:5px;color:#787878;padding:0 10px}\r\n\r\n/* 购物车组件 */.bottom_nav[data-v-fc609552]{position:fixed;bottom:0;width:100%;z-index:10}\r\n\r\n/* 弹窗 */.b_dialog .uni-popup[data-v-fc609552]{z-index:500}.info[data-v-fc609552]{background:#fff;padding-bottom:10px;-webkit-border-top-left-radius:15px;border-top-left-radius:15px;-webkit-border-top-right-radius:15px;border-top-right-radius:15px;padding:10px}.info_top[data-v-fc609552],\r\n.info_middle[data-v-fc609552]{border-bottom:1px solid #e5e5e5}.dialog_img[data-v-fc609552]{width:96px;height:96px}.right_message[data-v-fc609552]{display:inline-block;vertical-align:top;padding:20px;position:relative;width:calc(100% - 140px)}.close_dialog[data-v-fc609552]{position:absolute;right:0;top:-4px;font-size:28px;color:#c8c9cc}.price[data-v-fc609552]{color:#ee0a24;font-size:18px}.price .price_num[data-v-fc609552]{font-size:22px;margin-left:10px}.choose_goods[data-v-fc609552]{color:#969799;font-size:12px}.choose_name[data-v-fc609552]{margin-left:5px}.goods_tagName[data-v-fc609552]{font-size:14px;padding:5px 10px;margin-bottom:10px}.goods_list[data-v-fc609552]{margin-bottom:15px}.goods_list .detail_tag[data-v-fc609552]{display:inline-block;font-size:13px;padding:7px;background-color:#f7f8fa;color:#323233;margin-left:14px;-webkit-border-radius:3px;border-radius:3px;margin-bottom:10px}.goods_list .tagColor[data-v-fc609552]{color:#ee0a24;background-color:#fde7ea}.info_bottom[data-v-fc609552]{padding:10px;font-size:14px;height:30px;line-height:30px;padding-bottom:20px}.num_box[data-v-fc609552]{display:inline-block;float:right}[data-v-fc609552] #editor.ql-container,[data-v-fc609552] #editor.ql-container img{height:auto}[data-v-fc609552] .num_box .uni-numbox__value{width:35px;height:30px}[data-v-fc609552] .swiper{height:375px!important}[data-v-fc609552] #editor.ql-container,[data-v-fc609552] #editor.ql-container img{height:auto;display:block}[data-v-fc609552] .b_dialog .uni-popup{z-index:600}[data-v-fc609552] .num_box .uni-numbox__minus,[data-v-fc609552] .num_box .uni-numbox__plus{width:30px;height:30px}[data-v-fc609552] .num_box .uni-numbox__value{width:35px;height:30px}",""]),t.exports=o},"5c7b":function(t,o,i){"use strict";i.r(o);var e=i("a3b6"),n=i("c6a1");for(var a in n)"default"!==a&&function(t){i.d(o,t,(function(){return n[t]}))}(a);i("a7ed");var s,c=i("f0c5"),d=Object(c["a"])(n["default"],e["b"],e["c"],!1,null,"fc609552",null,!1,e["a"],s);o["default"]=d.exports},"5e8c":function(t,o,i){var e=i("39c7");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var n=i("4f06").default;n("31b22182",e,!0,{sourceMap:!1,shadowMode:!1})},a3b6:function(t,o,i){"use strict";i.d(o,"b",(function(){return n})),i.d(o,"c",(function(){return a})),i.d(o,"a",(function(){return e}));var e={uniGoodsNav:i("8410").default,uniPopup:i("636b").default,uniNumberBox:i("fe95").default},n=function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("v-uni-view",{staticClass:"integral"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-swiper",{staticClass:"swiper",attrs:{"indicator-dots":t.indicatorDots,autoplay:t.autoplay,interval:t.interval,duration:t.duration}},t._l(t.goods.eyeGoods.gallery,(function(t,o){return i("v-uni-swiper-item",{key:o},[i("v-uni-view",{staticClass:"swiper-item"},[i("v-uni-image",{attrs:{src:t}})],1)],1)})),1),t.goods?i("v-uni-view",{staticClass:"con_goods_name"},[t._v(t._s(t.goods.uloveIntegralGoods.goodsName))]):t._e(),t.goods?i("v-uni-view",{staticClass:"con_goods_price"},[i("span",{staticClass:"new_price"},[t._v("积分"+t._s(t.goods.uloveIntegralGoods.integration))])]):t._e(),i("v-uni-view",{staticClass:"details"},[i("v-uni-view",{staticStyle:{"margin-bottom":"10px"}},[t._v("商品详情")]),t.goods.eyeGoods.detail?i("v-uni-view",[i("v-uni-editor",{staticClass:"ql-container",attrs:{id:"editor","read-only":!0}})],1):i("v-uni-view",{staticStyle:{"border-top":"1px solid #e5e5e5","padding-top":"10px"}},[t._v("暂无详情")])],1),i("v-uni-view",{staticClass:"normal_prob"},[i("span",{staticClass:"normal_prob_span"},[t._v("常见问题")]),i("v-uni-view",{staticClass:"line"})],1),i("v-uni-view",{staticClass:"problem_content"},[i("ul",t._l(t.issue,(function(o,e){return i("li",{key:e,staticClass:"pro_li"},[i("span",{staticClass:"problem_title"},[t._v(t._s(o.question))]),i("v-uni-view",{staticClass:"problem_text"},[t._v(t._s(o.answer))])],1)})),0)])],1),i("v-uni-view",{staticClass:"bottom_nav"},[i("uni-goods-nav",{attrs:{fill:!0,options:t.options,buttonGroup:t.buttonGroup},on:{buttonClick:function(o){arguments[0]=o=t.$handleEvent(o),t.buttonClick.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"b_dialog"},[i("uni-popup",{ref:"popup",attrs:{type:"bottom"}},[i("v-uni-view",{staticClass:"info"},[i("v-uni-view",{staticClass:"info_top"},[i("img",{staticClass:"dialog_img",attrs:{src:t.skuGoods.picture,alt:""}}),i("v-uni-view",{staticClass:"right_message"},[i("span",{staticClass:"close_dialog",on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.close.apply(void 0,arguments)}}},[t._v("×")]),i("v-uni-view",{staticClass:"price"},[t._v("积分"),i("span",{staticClass:"price_num"},[t._v(t._s(t.chooseGoodsInfo.price))])]),i("v-uni-view",{staticClass:"choose_goods"},[t._v("已选"),i("span",{staticClass:"choose_name"},[t._v(t._s(t.chooseGoodsInfo.name))])])],1)],1),i("v-uni-view",{staticClass:"info_middle"},[i("v-uni-view",{staticClass:"goods_tagName"},[t._v("净含量")]),t.sku.tree[0]&&t.sku.tree[0].v?i("v-uni-view",{staticClass:"goods_list"},t._l(t.sku.tree[0].v,(function(o,e){return i("span",{key:e,staticClass:"detail_tag",class:[t.chooseT==e?"tagColor":""],on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.chooseTag(o,e)}}},[t._v(t._s(o.name))])})),0):t._e()],1),i("v-uni-view",{staticClass:"info_bottom"},[i("span",[t._v("兑换数量")]),i("v-uni-view",{staticClass:"num_box"},[i("uni-number-box",{attrs:{min:1,max:t.maxNum},on:{change:function(o){arguments[0]=o=t.$handleEvent(o),t.changeNum.apply(void 0,arguments)}}})],1)],1),i("uni-goods-nav",{attrs:{fill:!0,options:t.options_dialog,buttonGroup:t.buttonGroup_dialog},on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.onClickDialog.apply(void 0,arguments)},buttonClick:function(o){arguments[0]=o=t.$handleEvent(o),t.buttonClickDialog.apply(void 0,arguments)}}})],1)],1)],1)],1)},a=[]},a7ed:function(t,o,i){"use strict";var e=i("5e8c"),n=i.n(e);n.a},c6a1:function(t,o,i){"use strict";i.r(o);var e=i("c853"),n=i.n(e);for(var a in e)"default"!==a&&function(t){i.d(o,t,(function(){return e[t]}))}(a);o["default"]=n.a},c853:function(t,o,i){"use strict";var e=i("4ea4");i("e25e"),i("ac1f"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=e(i("5530")),a=e(i("baad")),s=e(i("8410")),c=e(i("636b")),d=e(i("1eea")),u=e(i("fe95")),r=e(i("2ef0")),l={components:{uniPopup:c.default,uniPopupDialog:d.default,uniGoodsNav:s.default,uniNumberBox:u.default},onLoad:function(t){this.itemId=JSON.parse(decodeURIComponent(t.itemid)),this.getInit()},data:function(){return{indicatorDots:!0,autoplay:!0,interval:2e3,duration:500,issue:[],goods:{eyeGoods:{gallery:[]},uloveIntegralGoods:{},level:!1},skuGoods:{title:"",picture:""},sku:{tree:[],list:[],price:"1.00"},chooseT:-1,propsPopup:!1,showSku:!1,chooseGoodsInfo:{name:"",price:"",stock_num:"",id:""},maxNum:1,inputNum:1,itemId:"",options_dialog:[],buttonGroup_dialog:[{text:"确认兑换",backgroundColor:"#ff1497",color:"#fff"}],buttonGroup:[{text:"立即兑换",backgroundColor:"#ff1497",color:"#fff"}],options:[]}},methods:{getInit:function(){var t=this;this.$request.get(a.default.integralDetails,{id:this.itemId}).then((function(o){console.log(o),t.goods=o.data,t.issue=o.data.issue;var i=t;setTimeout((function(){i.onEditorReady()}),1e3),t.skuAdapter()}))},onEditorReady:function(){var t=this;uni.createSelectorQuery().select("#editor").context((function(o){t.editorCtx=o.context,t.editorCtx.setContents({html:t.goods.eyeGoods.detail})})).exec()},openDialog:function(){this.$refs.popup.open()},close:function(){this.$refs.popup.close()},changeNum:function(t){console.log(t),this.inputNum=t},onClickDialog:function(t){console.log(t)},buttonClick:function(t){0==t.index&&(this.goods.level&&this.goods.adequate?(console.log("立即兑换"),this.$refs.popup.open()):uni.showToast({title:"积分不足或需要购买会员!!!",icon:"none"}))},chooseTag:function(t,o){console.log(t),this.chooseT=o,this.chooseGoodsInfo.name=t.name,this.chooseGoodsInfo.id=t.id},buttonClickDialog:function(t){0==t.index&&this.buyGoods()},buyGoods:function(){var t=this.chooseGoodsInfo,o={productId:this.chooseGoodsInfo.id,addressId:0,integralGoodsId:this.goods.uloveIntegralGoods.id,number:this.inputNum};console.log(o),o.productId?0!=t.stock_num?uni.navigateTo({url:"/pages/cart/Orders/Orders-integral?buy="+encodeURIComponent(JSON.stringify(o))}):uni.showToast({title:"库存不足",icon:"none",duration:1500}):uni.showToast({title:"选择分类",icon:"none",duration:1500})},getProductId:function(t,o){var i,e,n;return r.default.each(this.goods.specificationList,(function(i){r.default.each(i.valueList,(function(i){i.id===t?e=i.value:i.id===o&&(n=i.value)}))})),r.default.each(this.goods.productList,(function(t){var o=r.default.without(t.specifications,e,n);0===o.length&&(i=t.id)})),i},getProductIdByOne:function(t){var o,i;return r.default.each(this.goods.specificationList,(function(o){r.default.each(o.valueList,(function(o){o.id!==t||(i=o.value)}))})),r.default.each(this.goods.specificationList,(function(t){var e=r.default.without(t.specifications,i);0===e.length&&(o=t.id)})),o},skuAdapter:function(){var t=this.setSkuTree(),o=this.setSkuList(),i={price:parseInt(this.goods.uloveIntegralGoods.integration),stock_num:o[0].stock_num,collection_id:"",none_sku:!1,hide_stock:!0};this.sku=(0,n.default)({tree:t,list:o},i),this.skuGoods={title:this.goods.eyeGoods.name,picture:this.goods.eyeGoods.picUrl},this.chooseGoodsInfo.name=this.sku.tree[0].k,this.chooseGoodsInfo.price=this.sku.price,this.chooseGoodsInfo.stock_num=this.sku.stock_num,console.log(this.sku)},setSkuTree:function(){var t=[];return r.default.each(this.goods.productList,(function(o,i){var e=[];r.default.each(o.specifications,(function(t){e.push({name:t,id:o.id,imUrl:o.url})})),t.push({k:o.name,v:e,k_s:"s"+(1+~~i)})})),t},setSkuList:function(){var t=this,o=[];return r.default.each(this.goods.productList,(function(i){var e={};r.default.each(i.specifications,(function(o,i){e["s"+(1+~~i)]=t.findSpecValueIdByName(o)})),e.price=100*i.price,e.stock_num=i.number,o.push(e)})),o},findSpecValueIdByName:function(t){var o=0;return r.default.each(this.goods.specificationList,(function(i){r.default.each(i.valueList,(function(i){i.value!==t||(o=i.id)}))})),o}}};o.default=l}}]);