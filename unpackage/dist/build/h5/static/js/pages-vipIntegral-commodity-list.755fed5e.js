(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-vipIntegral-commodity-list"],{"21f5":function(o,t,i){var e=i("24fb");t=e(!1),t.push([o.i,"[data-v-1281a938] .num_box .uni-numbox__minus,[data-v-1281a938] .num_box .uni-numbox__plus{width:30px;height:30px}[data-v-1281a938] .num_box .uni-numbox__value{width:35px;height:30px}[data-v-1281a938] .swiper{height:375px!important}.container[data-v-1281a938]{background-color:#f2f2f2}.content[data-v-1281a938]{margin-bottom:50px}\r\n\r\n/* 轮播图 */.swiper[data-v-1281a938]{height:%?700?%}.swiper-item uni-image[data-v-1281a938]{height:375px;width:100%}\r\n\r\n/* 商品介绍 */.con_goods_name[data-v-1281a938]{font-size:14px;padding:10px 15px;background-color:#fff}.con_goods_price[data-v-1281a938]{height:30px;line-height:30px;padding:0 15px;background-color:#fff}.new_price[data-v-1281a938]{font-size:20px;color:#ff1497;margin-right:10px}.old_price[data-v-1281a938]{font-size:12px;color:#999;text-decoration:line-through}\r\n\r\n/* 商品规格 */.middle_size[data-v-1281a938]{margin-top:20px;height:40px;line-height:40px;background:#fff;font-size:14px;padding:0 20px;text-align:right}.middle_size>span[data-v-1281a938]{float:left}\r\n\r\n/* 商品详情 */.details[data-v-1281a938]{background-color:#fff;margin-top:20px;text-align:center;font-size:14px;padding:10px}\r\n\r\n/* 商品常见问题 */.normal_prob[data-v-1281a938]{margin-top:10px;text-align:center;font-size:14px;padding:10px;position:relative}.normal_prob_span[data-v-1281a938]{z-index:10;position:relative;width:80px;display:inline-block;background:#f2f2f2}.line[data-v-1281a938]{width:calc(100% - 20px);border:1px solid #e5e5e5;position:absolute;top:19px;z-index:0}.problem_content[data-v-1281a938]{background-color:#fff;padding:10px 0}.pro_li[data-v-1281a938]{font-size:14px;margin-bottom:10px}.problem_text[data-v-1281a938]{margin-top:5px;color:#787878;padding:0 10px}\r\n\r\n/* 购物车组件 */.bottom_nav[data-v-1281a938]{position:fixed;bottom:0;width:100%;z-index:500}\r\n\r\n/* 弹窗 */.b_dialog .uni-popup[data-v-1281a938]{z-index:500}.info[data-v-1281a938]{background:#fff;padding-bottom:10px;-webkit-border-top-left-radius:15px;border-top-left-radius:15px;-webkit-border-top-right-radius:15px;border-top-right-radius:15px;padding:10px}.info_top[data-v-1281a938],\r\n.info_middle[data-v-1281a938]{border-bottom:1px solid #e5e5e5}.dialog_img[data-v-1281a938]{width:96px;height:96px}.right_message[data-v-1281a938]{display:inline-block;vertical-align:top;padding:20px;position:relative;width:calc(100% - 140px)}.close_dialog[data-v-1281a938]{position:absolute;right:0;top:-4px;font-size:28px;color:#c8c9cc}.price[data-v-1281a938]{color:#ee0a24;font-size:18px}.price .price_num[data-v-1281a938]{font-size:22px;margin-left:10px}.choose_goods[data-v-1281a938]{color:#969799;font-size:12px}.choose_name[data-v-1281a938]{margin-left:5px}.goods_tagName[data-v-1281a938]{font-size:14px;padding:5px 10px;margin-bottom:10px}.goods_list[data-v-1281a938]{margin-bottom:15px}.goods_list .detail_tag[data-v-1281a938]{display:inline-block;font-size:13px;padding:7px;background-color:#f7f8fa;color:#323233;margin-left:14px;-webkit-border-radius:3px;border-radius:3px;margin-bottom:10px}.goods_list .tagColor[data-v-1281a938]{color:#ee0a24;background-color:#fde7ea}.info_bottom[data-v-1281a938]{padding:10px;font-size:14px;height:30px;line-height:30px;padding-bottom:20px}.num_box[data-v-1281a938]{display:inline-block;float:right}[data-v-1281a938] #editor.ql-container,[data-v-1281a938] #editor.ql-container img{height:auto}[data-v-1281a938] .num_box .uni-numbox__value{width:35px;height:30px}[data-v-1281a938] .swiper{height:375px!important}[data-v-1281a938] #editor.ql-container,[data-v-1281a938] #editor.ql-container img{height:auto;display:block}[data-v-1281a938] .b_dialog .uni-popup{z-index:600}",""]),o.exports=t},3863:function(o,t,i){var e=i("21f5");"string"===typeof e&&(e=[[o.i,e,""]]),e.locals&&(o.exports=e.locals);var s=i("4f06").default;s("ed1e4a70",e,!0,{sourceMap:!1,shadowMode:!1})},"563c":function(o,t,i){"use strict";var e=i("4ea4");i("a9e3"),i("b680"),i("ac1f"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=e(i("5530")),n=e(i("ade3")),a=e(i("1070")),d=e(i("2d61")),u=e(i("a64e")),c=e(i("79d8")),r=e(i("421f")),l=e(i("2ef0")),p={components:{uniPopup:u.default,uniPopupDialog:c.default,uniGoodsNav:d.default,uniNumberBox:r.default},onLoad:function(o){this.itemId=JSON.parse(decodeURIComponent(o.itemid)),console.log(this.itemId),this.getDetail()},data:function(){var o;return o={Property:[],chooseT:-1,background:["color1","color2","color3"],indicatorDots:!0,autoplay:!0,interval:2e3,duration:500,issue:[],goods:{userHasCollect:0,info:{gallery:[],id:0},memberGoods:{id:0},level:!1,id:0},sku:{tree:[],list:[],price:"1.00"},relateList:[],skuGoods:{title:"",picture:""},cartInfo:0,selectSku:{selectedNum:1,selectedSkuComb:{sku_str:"aa"}}},(0,n.default)(o,"chooseT",-1),(0,n.default)(o,"propsPopup",!1),(0,n.default)(o,"showSku",!1),(0,n.default)(o,"chooseGoodsInfo",{name:"",price:"",stock_num:"",id:""}),(0,n.default)(o,"maxNum",10),(0,n.default)(o,"inputNum",1),(0,n.default)(o,"itemId",""),(0,n.default)(o,"options_dialog",[]),(0,n.default)(o,"buttonGroup_dialog",[{text:"加入购物车",backgroundColor:"rgb(255, 20, 151)",color:"#fff"},{text:"立即购买",backgroundColor:"rgb(180, 40, 45)",color:"#fff"}]),(0,n.default)(o,"buttonGroup",[{text:"加入购物车",backgroundColor:"rgb(255, 20, 151)",color:"#fff"},{text:"立即购买",backgroundColor:"rgb(180, 40, 45)",color:"#fff"}]),(0,n.default)(o,"buttonGroup_dialog_method",[{text:"确认",backgroundColor:"rgb(180, 40, 45)",color:"#fff"}]),(0,n.default)(o,"showMethod",""),(0,n.default)(o,"buyMethods",""),(0,n.default)(o,"options",[{icon:"star",text:"收藏",info:0,infoBackgroundColor:"#007aff",infoColor:"red",color:""},{icon:"cart",text:"购物车",info:0,color:""}]),o},methods:{onClick:function(o){"收藏"==o.content.text?this.addCollect():"购物车"==o.content.text&&uni.switchTab({url:"/pages/cart/cart"})},ifCollect:function(){1==this.goods.userHasCollect?this.options[0].color="#ff1497":this.options[0].color="rgb(100, 101, 102)"},onClickDialog:function(o){console.log(o)},openDialog:function(){this.goods.level?(this.showMethod=!0,this.$refs.popup.open()):uni.showToast({title:"请先购买会员",icon:"none"})},buttonClick:function(o){console.log(o),this.showMethod=!1,0==o.index?this.goods.level?(this.buyMethods="cart",console.log("加入购物车"),this.$refs.popup.open()):uni.showToast({title:"请先购买会员",icon:"none"}):this.goods.level?(this.buyMethods="pay",console.log("立即购买"),this.$refs.popup.open()):uni.showToast({title:"请先购买会员",icon:"none"})},buttonClickDialog:function(o){this.showMethod?0==o.index?(console.log("加入购物车"),this.addCart()):(console.log("立即购买"),this.buyGoods()):this.buttonClickDialogMethod()},buttonClickDialogMethod:function(){"cart"==this.buyMethods?(console.log("加入购物车"),this.addCart()):(console.log("立即购买"),this.buyGoods())},addCollect:function(){var o=this;this.$request.post(a.default.collectDelete,{valueId:this.goods.info.id,type:0}).then((function(t){1===o.goods.userHasCollect?(o.goods.userHasCollect=0,uni.showToast({title:"取消收藏成功"}),o.ifCollect()):(o.goods.userHasCollect=1,uni.showToast({title:"收藏成功",icon:"none"}),o.ifCollect())}))},close:function(){this.$refs.popup.close()},chooseTag:function(o,t){for(var i in console.log(o),this.chooseT=t,this.chooseGoodsInfo.name=o.name,this.chooseGoodsInfo.id=o.id,this.sku.list)if(this.sku.list[i].s1){if(this.sku.list[i].s1===o.id)return this.chooseGoodsInfo.price=(this.sku.list[i].price/100).toFixed(2),this.chooseGoodsInfo.stock_num=this.sku.list[i].stock_num,this.chooseGoodsInfo.s1=o.id,void(this.maxNum=this.chooseGoodsInfo.stock_num)}else if(this.sku.list[i].s2){if(this.sku.list[i].s2===o.id)return this.chooseGoodsInfo.price=(this.sku.list[i].price/100).toFixed(2),this.chooseGoodsInfo.stock_num=this.sku.list[i].stock_num,this.chooseGoodsInfo.s2=o.id,void(this.maxNum=this.chooseGoodsInfo.stock_num)}else if(this.sku.list[i].s3&&this.sku.list[i].s3===o.id)return this.chooseGoodsInfo.price=(this.sku.list[i].price/100).toFixed(2),this.chooseGoodsInfo.stock_num=this.sku.list[i].stock_num,this.chooseGoodsInfo.s3=o.id,void(this.maxNum=this.chooseGoodsInfo.stock_num)},changeNum:function(o){this.inputNum=o},getDetail:function(){var o=this;this.$request.get(a.default.vipDetails,{id:this.itemId}).then((function(t){console.log(t),o.goods=t.data,o.issue=t.data.issue,o.memberGoods=t.data.memberGoods.id;var i=o;setTimeout((function(){i.ifCollect(),i.onEditorReady()}),1e3),o.skuAdapter()})),this.getCartInfo()},getCartInfo:function(){var o=this;this.$request.get(a.default.cartNumber,{}).then((function(t){o.cartInfo=t.data,o.options[1].info=t.data}))},onEditorReady:function(){var o=this;uni.createSelectorQuery().select("#editor").context((function(t){o.editorCtx=t.context,o.editorCtx.setContents({html:o.goods.info.detail})})).exec()},addCart:function(){var o=this,t=this.chooseGoodsInfo;console.log(t);var i={goodsId:this.goods.memberGoods.goodsId,number:this.inputNum,productId:0};l.default.has(t,"s3")?uni.showToast({title:"目前仅支持两规格",icon:"none"}):(l.default.has(t,"s2")?i.productId=this.getProductId(t.s1,t.s2):i.productId=this.getProductIdByOne(t.s1),console.log(i),i.productId?0!=t.stock_num?this.$request.post(a.default.addCart,i).then((function(t){console.log(t),"请登录"!==t.errmsg?(o.cartInfo=Number(o.cartInfo)+Number(o.inputNum),o.options[1].info=o.cartInfo,uni.showToast({title:"已添加至购物车",icon:"none",duration:1500}),o.$refs.popup.close()):uni.showToast({title:"请登录",icon:"none",duration:1500})})):uni.showToast({title:"库存不足",icon:"none",duration:1500}):uni.showToast({title:"选择分类",icon:"none",duration:1500}))},buyGoods:function(){var o=this,t=this.chooseGoodsInfo;console.log(t.stock_num);var i={goodsId:this.goods.info.id,number:this.inputNum,productId:0};l.default.has(t,"s3")?uni.showToast({title:"目前仅支持两规格",icon:"none"}):(l.default.has(t,"s2")?i.productId=this.getProductId(t.s1,t.s2):i.productId=this.getProductIdByOne(t.s1),i.productId?0!=t.stock_num?this.$request.post(a.default.fastadd,i).then((function(t){console.log(t),"请登录"!==t.errmsg?(uni.setStorageSync("cartId",t.data),uni.setStorageSync("memberGoodsId",o.goods.memberGoods.id),uni.navigateTo({url:"/pages/cart/Orders/Orders"})):uni.showToast({title:"请登录",icon:"none",duration:1500})})):uni.showToast({title:"库存不足",icon:"none",duration:1500}):uni.showToast({title:"选择分类",icon:"none",duration:1500}))},getProductId:function(o,t){var i,e,s;return l.default.each(this.goods.specificationList,(function(i){l.default.each(i.valueList,(function(i){i.id===o?e=i.value:i.id===t&&(s=i.value)}))})),l.default.each(this.goods.productList,(function(o){var t=l.default.without(o.specifications,e,s);0===t.length&&(i=o.id)})),i},getProductIdByOne:function(o){var t,i;return l.default.each(this.goods.specificationList,(function(t){l.default.each(t.valueList,(function(t){t.id!==o||(i=t.value)}))})),l.default.each(this.goods.productList,(function(o){var e=l.default.without(o.specifications,i);0===e.length&&(t=o.id)})),t},skuAdapter:function(){var o=this.setSkuTree(),t=this.setSkuList(),i={price:this.goods.memberGoods.discountPrice,stock_num:0,collection_id:"",none_sku:!1,hide_stock:!0};this.sku=(0,s.default)({tree:o,list:t},i),this.skuGoods={title:this.goods.info.name,picture:this.goods.info.picUrl},this.chooseGoodsInfo.name=this.sku.tree[0].k,this.chooseGoodsInfo.price=this.sku.price,console.log(this.sku)},setSkuTree:function(){var o=[];return l.default.each(this.goods.specificationList,(function(t,i){var e=[];l.default.each(t.valueList,(function(o){o.name=o.value,e.push({id:o.id,name:o.value,imUrl:o.picUrl})})),o.push({k:t.name,v:e,k_s:"s"+(1+~~i)})})),o},setSkuList:function(){var o=this,t=[];return l.default.each(this.goods.productList,(function(i){var e={};l.default.each(i.specifications,(function(t,i){e["s"+(1+~~i)]=o.findSpecValueIdByName(t)})),e.price=100*i.price,e.stock_num=i.number,t.push(e)})),console.log(),t},findSpecValueIdByName:function(o){var t=0;return l.default.each(this.goods.specificationList,(function(i){l.default.each(i.valueList,(function(i){i.value!==o||(t=i.id)}))})),t}}};t.default=p},"9f41":function(o,t,i){"use strict";var e=i("3863"),s=i.n(e);s.a},c261:function(o,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return e}));var e={uniIcons:i("ecaf").default,uniGoodsNav:i("2d61").default,uniPopup:i("a64e").default,uniNumberBox:i("421f").default},s=function(){var o=this,t=o.$createElement,i=o._self._c||t;return i("v-uni-view",{staticClass:"container"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-swiper",{staticClass:"swiper",attrs:{"indicator-dots":o.indicatorDots,autoplay:o.autoplay,interval:o.interval,duration:o.duration}},o._l(o.goods.info.gallery,(function(o,t){return i("v-uni-swiper-item",{key:t},[i("v-uni-view",{staticClass:"swiper-item"},[i("v-uni-image",{attrs:{src:o}})],1)],1)})),1),o.goods?i("v-uni-view",{staticClass:"con_goods_name"},[o._v(o._s(o.goods.info.name))]):o._e(),o.goods?i("v-uni-view",{staticClass:"con_goods_price"},[i("span",{staticClass:"new_price"},[o._v("¥"+o._s(o.goods.memberGoods.discountPrice))]),i("span",{staticClass:"old_price"},[o._v("¥"+o._s(o.goods.memberGoods.retailPrice))])]):o._e(),i("v-uni-view",{staticClass:"middle_size",on:{click:function(t){arguments[0]=t=o.$handleEvent(t),o.openDialog.apply(void 0,arguments)}}},[o.goods.productList?i("span",[o._v(o._s(o.goods.productList[0].specifications[0]))]):o._e(),i("uni-icons",{attrs:{type:"forward",size:"20"}})],1),i("v-uni-view",{staticClass:"details"},[i("v-uni-view",{staticStyle:{"margin-bottom":"10px"}},[o._v("商品详情")]),o.goods.info.detail?i("v-uni-view",[i("v-uni-editor",{staticClass:"ql-container",attrs:{id:"editor","read-only":!0}})],1):i("v-uni-view",{staticStyle:{"border-top":"1px solid #e5e5e5","padding-top":"10px"}},[o._v("暂无详情")])],1),i("v-uni-view",{staticClass:"normal_prob"},[i("span",{staticClass:"normal_prob_span"},[o._v("常见问题")]),i("v-uni-view",{staticClass:"line"})],1),i("v-uni-view",{staticClass:"problem_content"},[i("ul",o._l(o.issue,(function(t,e){return i("li",{key:e,staticClass:"pro_li"},[i("span",{staticClass:"problem_title"},[o._v(o._s(t.question))]),i("v-uni-view",{staticClass:"problem_text"},[o._v(o._s(t.answer))])],1)})),0)])],1),i("v-uni-view",{staticClass:"bottom_nav"},[i("uni-goods-nav",{attrs:{fill:!0,options:o.options,buttonGroup:o.buttonGroup},on:{click:function(t){arguments[0]=t=o.$handleEvent(t),o.onClick.apply(void 0,arguments)},buttonClick:function(t){arguments[0]=t=o.$handleEvent(t),o.buttonClick.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"b_dialog"},[i("uni-popup",{ref:"popup",attrs:{type:"bottom"}},[i("v-uni-view",{staticClass:"info"},[i("v-uni-view",{staticClass:"info_top"},[i("img",{staticClass:"dialog_img",attrs:{src:o.skuGoods.picture,alt:""}}),i("v-uni-view",{staticClass:"right_message"},[i("span",{staticClass:"close_dialog",on:{click:function(t){arguments[0]=t=o.$handleEvent(t),o.close.apply(void 0,arguments)}}},[o._v("×")]),i("v-uni-view",{staticClass:"price"},[o._v("¥"),i("span",{staticClass:"price_num"},[o._v(o._s(o.chooseGoodsInfo.price))])]),i("v-uni-view",{staticClass:"choose_goods"},[o._v("已选"),i("span",{staticClass:"choose_name"},[o._v(o._s(o.chooseGoodsInfo.name))])])],1)],1),i("v-uni-view",{staticClass:"info_middle"},[i("v-uni-view",{staticClass:"goods_tagName"},[o._v("规格")]),o.sku.tree[0]&&o.sku.tree[0].v?i("v-uni-view",{staticClass:"goods_list"},o._l(o.sku.tree[0].v,(function(t,e){return i("span",{key:e,staticClass:"detail_tag",class:[o.chooseT==e?"tagColor":""],on:{click:function(i){arguments[0]=i=o.$handleEvent(i),o.chooseTag(t,e)}}},[o._v(o._s(t.name))])})),0):o._e()],1),i("v-uni-view",{staticClass:"info_bottom"},[i("span",[o._v("购买数量")]),i("v-uni-view",{staticClass:"num_box"},[i("uni-number-box",{attrs:{min:1,max:o.maxNum},on:{change:function(t){arguments[0]=t=o.$handleEvent(t),o.changeNum.apply(void 0,arguments)}}})],1)],1),i("uni-goods-nav",{attrs:{fill:!0,options:o.options_dialog,buttonGroup:o.showMethod?o.buttonGroup_dialog:o.buttonGroup_dialog_method},on:{click:function(t){arguments[0]=t=o.$handleEvent(t),o.onClickDialog.apply(void 0,arguments)},buttonClick:function(t){arguments[0]=t=o.$handleEvent(t),o.buttonClickDialog.apply(void 0,arguments)}}})],1)],1)],1)],1)},n=[]},c764:function(o,t,i){"use strict";i.r(t);var e=i("c261"),s=i("ca0a");for(var n in s)"default"!==n&&function(o){i.d(t,o,(function(){return s[o]}))}(n);i("9f41");var a,d=i("f0c5"),u=Object(d["a"])(s["default"],e["b"],e["c"],!1,null,"1281a938",null,!1,e["a"],a);t["default"]=u.exports},ca0a:function(o,t,i){"use strict";i.r(t);var e=i("563c"),s=i.n(e);for(var n in e)"default"!==n&&function(o){i.d(t,o,(function(){return e[o]}))}(n);t["default"]=s.a}}]);